:root {
  /* Primitive Colors - Tailwind Palette References */
  /* Blue */
  --p-primary-600: #2563eb;
  --p-primary-500: #3b82f6;
  --p-primary-400: #60a5fa;
  --p-primary-100: #dbeafe;

  /* Cool Gray */
  --p-gray-950: #030712;
  --p-gray-900: #111827;
  --p-gray-800: #1f2937;
  --p-gray-700: #374151;
  --p-gray-600: #4b5563;
  --p-gray-500: #6b7280;
  --p-gray-400: #9ca3af;
  --p-gray-300: #d1d5db;
  --p-gray-200: #e5e7eb;
  --p-gray-100: #f3f4f6;
  --p-gray-50:  #f9fafb;

  /* Status */
  --p-green-600: #16a34a;
  --p-green-500: #22c55e;
  --p-green-400: #4ade80;

  --p-red-600: #dc2626;
  --p-red-500: #ef4444;
  --p-red-400: #f87171;

  /* Semantic Tokens - Light Mode (Default) */
  --color-primary: var(--p-primary-600);
  --color-primary-text: #ffffff; /* Text on primary bg */
  
  --color-bg-body: var(--p-gray-50);
  --color-bg-subtle: var(--p-gray-100);
  --color-bg-card: #ffffff;
  --color-bg-input: var(--p-gray-100);
  --color-bg-hover: var(--p-gray-50);

  --color-text-body: var(--p-gray-900);
  --color-text-muted: var(--p-gray-500);
  --color-text-inverse: #ffffff;
  
  --color-border: var(--p-gray-200);
  --color-border-hover: var(--p-gray-300);
  --color-border-card: var(--p-gray-200);
  
  /* Header specific */
  --color-bg-header: var(--p-primary-600);
  --color-text-header: #ffffff;
  --color-header-border: transparent;
  
  /* Status */
  --color-success: var(--p-green-600);
  --color-danger: var(--p-red-600);
  
  /* Charts */
  --color-chart-text: var(--p-gray-700);
  --color-chart-grid: var(--p-gray-200);

  /* Chart Palette */
  --color-chart-1: #3B82F6;
  --color-chart-2: #EF4444;
  --color-chart-3: #10B981;
  --color-chart-4: #F59E0B;
  --color-chart-5: #6366F1;
  --color-chart-6: #EC4899;
  --color-chart-7: #8B5CF6;
  --color-chart-8: #0EA5E9;
  --color-chart-9: #22C55E;
  --color-chart-10: #EAB308;
  --color-chart-11: #818CF8;
  --color-chart-12: #D946EF;
  --color-chart-13: #A855F7;
}

.dark {
  /* Semantic Tokens - Dark Mode */
  --color-primary: var(--p-primary-500);
  --color-primary-text: #ffffff;

  --color-bg-body: var(--p-gray-900); /* deep dark */
  --color-bg-subtle: var(--p-gray-800);
  --color-bg-card: var(--p-gray-800);
  --color-bg-input: var(--p-gray-950); /* slightly darker than card for contrast */
  --color-bg-hover: var(--p-gray-700);

  --color-text-body: var(--p-gray-100);
  --color-text-muted: var(--p-gray-400);
  --color-text-inverse: var(--p-gray-900);
  
  --color-border: var(--p-gray-700);
  --color-border-hover: var(--p-gray-600);
  --color-border-card: var(--p-gray-700);
  
  /* Header specific - Match sidebar/dark theme */
  --color-bg-header: var(--p-gray-800);
  --color-text-header: var(--p-gray-100);
  --color-header-border: var(--p-gray-700);
  
  /* Status */
  --color-success: var(--p-green-400);
  --color-danger: var(--p-red-400);

  /* Charts */
  --color-chart-text: var(--p-gray-200);
  --color-chart-grid: var(--p-gray-700);
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, sans-serif;
  background-color: var(--color-bg-body);
  color: var(--color-text-body);
  transition: background-color 0.2s, color 0.2s;
  -webkit-font-smoothing: antialiased;
}

/* Global Layout Utilities */
.page-container {
  width: 100%;
}

.page-title {
  font-size: 1.5rem; /* 24px */
  font-weight: 700;
  margin-bottom: 1.5rem;
  color: var(--color-text-body);
}

.section-title {
  font-size: 1.25rem; /* 20px */
  font-weight: 600;
  margin-bottom: 1rem;
  color: var(--color-text-body);
}

/* Form Input Overrides to ensure CSS variable usage */

/* Fix for SelectMenu input */
div[data-headlessui-state] input {
  color: var(--color-text-body) !important;
  background-color: var(--color-bg-input) !important;
}

/* Fix for all form inputs to use theme variables */
input:not([type="checkbox"]):not([type="radio"]),
textarea,
select {
  background-color: var(--color-bg-input) !important;
  color: var(--color-text-body) !important;
  border-color: var(--color-border) !important;
}

/* Override any .form-input rules that set white background */
.form-input,
.form-textarea,
.form-select,
.form-multiselect {
  background-color: var(--color-bg-input) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-body) !important;
}

/* Fix USelectMenu search input width and styling */
[data-headlessui-state="open"] input[type="search"],
[data-headlessui-state="open"] input[type="text"] {
  width: 100% !important;
  box-sizing: border-box !important;
  background-color: var(--color-bg-input) !important;
  color: var(--color-text-body) !important;
  border-color: var(--color-border) !important;
}

/* Style search input placeholder */
[data-headlessui-state="open"] input[type="search"]::placeholder,
[data-headlessui-state="open"] input[type="text"]::placeholder {
  color: var(--color-text-muted) !important;
}

/* Fix mobile keyboard issue for dropdowns */
@media (max-width: 768px) {
  /* Target dropdown panels - common pattern for Headless UI */
  [data-headlessui-state="open"] [role="listbox"],
  [data-headlessui-state="open"] [role="menu"],
  [data-headlessui-state="open"] [role="dialog"] {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    max-height: 70vh !important;
    overflow-y: auto !important;
    z-index: 9999 !important;
    margin: 0 !important;
    border-radius: 0.75rem 0.75rem 0 0 !important;
    box-shadow: 0 -10px 25px -5px rgba(0, 0, 0, 0.1), 0 -10px 10px -5px rgba(0, 0, 0, 0.04) !important;
    transform: none !important;
    top: auto !important;
  }

  /* Ensure search input is visible and full width */
  [data-headlessui-state="open"] input[type="search"],
  [data-headlessui-state="open"] input[type="text"] {
    width: 100% !important;
    box-sizing: border-box !important;
    position: sticky !important;
    top: 0 !important;
    background-color: var(--color-bg-card) !important;
    z-index: 10000 !important;
    border-bottom: 1px solid var(--color-border) !important;
  }

  /* Prevent body scroll when dropdown is open on mobile */
  body[data-headlessui-state="open"] {
    overflow: hidden !important;
  }
}
